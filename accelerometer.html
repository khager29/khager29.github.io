<!DOCTYPE html>
<html>
    <head>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css" />
    </head>
    <body>
        <h2>Accelerometer Work</h2>
        <p id="textDisplay1">This text will be updated.</p>
        <div id="box" width="300px" height="300px">
            <div
                id="ball"
                width="10px"
                height="10px"
                style="border-radius:50%;background-color: blue"></div>
        </div>
        <script>
            const textDisplay1 = document.querySelector("#textDisplay1");
            const ball = document.querySelector("#ball");
              let accelerometer = null;
              try {
                const acl = new Accelerometer({
                  referenceFrame: "device",
                  frequency: 60,
                });
                console.log(acl);
                if(typeof acl !== null){
                  acl.addEventListener("error", (event) => {
                    // Handle runtime errors.
                    if (event.error.name === "NotAllowedError") {
                      // Branch to code for requesting permission.
                    } else if (event.error.name === "NotReadableError") {
                      textDisplay1.innerText = "Cannot connect to the sensor.";
                    }
                  });
                  acl.addEventListener("reading", () => {
                    ball.style=`border-radius:50%;background-color: blue;transform:translate(${acl.x+150},${acl.y+150})`;
                    textDisplay1.innerHTML = `<p>Acceleration along the X-axis ${Math.round(100*acl.x)/100}</p>
                    <p>Acceleration along the Y-axis ${Math.round(100*acl.y)/100}</p>
                    <p>Acceleration along the Z-axis ${Math.round(100*acl.z)/100}</p>`;
                  });

                  acl.start();
                }
              } catch (error) {
                // Handle construction errors.
                if (error.name === "SecurityError") {
                  // See the note above about permissions policy.
                  textDisplay1.innerText = "Sensor construction was blocked by a permissions policy."
                } else if (error.name === "ReferenceError") {
                  textDisplay1.innerText = "Sensor is not supported by the User Agent."
                } else {
                  throw error;
                }
              }
        </script>
    </body>
</html>
